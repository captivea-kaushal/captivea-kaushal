<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <record id="payment_transaction_form_stancer" model="ir.ui.view">
        <field name="name">Payment Transaction Stancer Refund Button</field>
        <field name="model">payment.transaction</field>
        <field name="inherit_id" ref="payment.payment_transaction_form"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='action_void']" position="after">
                <button type="object" name="action_stancer_refund" attrs="{'invisible': [('state', '!=', 'done'), ('provider_code', '!=', 'stancer'), ('refund_processed', '=', True), ('is_refund_transfer', '=', True)]}" string="Process Stancer Refund" class="oe_highlight"/>
            </xpath>

            <xpath expr="//field[@name='provider_reference']" position="after">
                <field name="refund_processed" invisible="1"/>
                <field name="is_refund_transfer" invisible="1"/>
                <field name="stancer_refund_id" attrs="{'invisible': [('stancer_refund_id', '=', False)]}"/>
                <field name="stancer_refund_tx_id" attrs="{'invisible': [('stancer_refund_tx_id', '=', False)]}"/>
            </xpath>

            <xpath expr="//group[2]" position="after">
                <group string="Refund Response" attrs="{'invisible': [('refund_response', '=', False)]}">
                        <field name="refund_response" nolabel="1"/>
                </group>
            </xpath>
        </field>
    </record>

</odoo>